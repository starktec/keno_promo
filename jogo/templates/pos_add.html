{% extends "index.html" %}
{% block titulo %}
CRIAR POS
{% endblock %}
{% block nav-bar %}
<!------------------------------------------------------------------------------------------------------------>

        <div class="row justify-content-center">
            <div class="row safari-container col-lg-8">
                <div class="row safari-container col-12 card crud-bar justify-content-center card-criar-partida">
                    <div class="alert alert-fill alert-secondary alert-icon header-modal crud-bar-user-header">
                        <em class="icon ni ni-plus"></em>
                        <h6>Criar POS</h6>
                    </div>
                    <form class="col-12 row form-group" method="post">
                    {% csrf_token %}

                        <div class="row col-12 justify-content-start">
                            <div class="col-lg-4 col-sm-4 container-input-create">
                                <div class="form-control-wrap">
                                    {{ form.fabricante }}
                                    <label class="form-label-outlined" for= "id_fabricante">Fabricante</label>
                                </div>
                            </div>

                            <div class="col-lg-4 col-sm-4 container-input-create">
                                <div class="form-control-wrap">
                                    {{ form.modelo }}
                                    <label class="form-label-outlined" for= "id_modelo">Modelo</label>
                                </div>
                            </div>

                            <div class="col-lg-4 col-sm-4 container-input-create">
                                <div class="form-control-wrap">
                                    {{ form.serial }}
                                    <label class="form-label-outlined" for= "id_serial">Serial</label>
                                </div>
                            </div>

                            <div class="col-lg-12 col-sm-12 container-input-create">
                                <div class="form-group">
                                    <div class="form-control-wrap">
                                        {{ form.descricao }}
                                        <label class="form-label-outlined" for= "id_descricao">Descrição</label>
                                    </div>
                                </div>
                                {% if form.mac_address.errors %}
                                        <div class="error-campo">
                                          {{ form.mac_address.errors }}
                                        </div>
                                {% endif %}
                            </div>

                            <div class="col-lg-12 col-sm-12 container-input-create">
                                <div class="form-control-wrap">
                                    {{ form.mac_address }}
                                    <label class="form-label-outlined" for= "id_mac_address">Mac Address</label>
                                </div>
                            </div>
                            <div class="row col-lg-12 col-sm-12 container-input-create">
                                <div class="form-check-inline">
                                    <ul id="id_franquias" class="form-check-input checks">
                                        <li>
                                            <label for="id_pos_online">
                                                {{ form.pos_online }}
                                                POS online
                                            </label>                                
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div id="block-estabelecimento" class="col-lg-5 col-sm-5 container-input-create">
                                <div class="form-control-wrap">
                                    {{ form.estabelecimento }}
                                    <label class="form-label-outlined" for= "id_estabelecimento">Estabelecimento</label>
                                </div>
                            </div>

                            <div class="col-lg-5 col-sm-5 container-input-create">
                                <div class="form-control-wrap">
                                    {{ form.vendedor }}
                                    <label class="form-label-outlined" for= "id_vendedor">Vendedor</label>
                                </div>
                                {% if form.vendedor.errors %}
                                    <div class="error-campo">
                                        {{ form.vendedor.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <div id="container-btn" class="col-lg-2 col-md-2 col-sm-2 col-3 container-input-create">
                                <button type="button" id="btn-remove-vendedor" class="remove-dono col-12 btn btn-danger btn-adicionar btn-lg">
                                    <em class="icon ni ni-minus-sm"></em>
                                </button>
                                <button type="button" id="btn-create-vendedor" class="create-dono col-12 btn btn-success btn-adicionar btn-lg">
                                    <em class="icon ni ni-plus-sm"></em>
                                </button>
                            </div>
                        </div>

                        <div id="content-vendedor" class="row col-12 justify-content-start">
                            <div class="col-lg-12 row justify-content-between container-input-create form-sub-title">
                            
                                <h6>Vendedor</h6>
                            </div>

                            <div class="col-lg-6 col-sm-6 container-input-create">
                                <div class="form-group">
                                    <div class="form-control-wrap">
                                        {{ form.login }}
                                        <label class="form-label-outlined" for="id_login">Login</label>
                                    </div>
                                    {% if form.login.errors %}
                                        <div class="error-campo">
                                            {{ form.login.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
    
                            <div class="col-lg-6 col-sm-6 container-input-create">
                                <div class="form-group">
                                    <div class="form-control-wrap">
                                        {{ form.nome }}
                                        <label class="form-label-outlined" for="id_nome">Nome</label>
                                    </div>
                                    {% if form.nome.errors %}
                                        <div class="error-campo">
                                            {{ form.nome.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
    
                            <div class="col-lg-6 col-sm-6 container-input-create">
                                <div class="form-group">
                                    <div class="form-control-wrap">
                                        {{ form.senha }}
                                        <label class="form-label-outlined" for="id_senha">Senha</label>
                                    </div>
                                    {% if form.senha.errors %}
                                        <div class="error-campo">
                                            {{ form.senha.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
    
                            <div class="col-lg-6 col-sm-6 container-input-create">
                                <div class="form-group">
                                    <div class="form-control-wrap">
                                        {{ form.senha_novamente }}
                                        <label class="form-label-outlined" for="id_senha_novamente">Confirmar Senha</label>
                                    </div>
                                    {% if form.senha_novamente.errors %}
                                        <div class="error-campo">
                                            {{ form.senha_novamente.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
    
                            
                        </div>

                        <div class="col-12 row container-btn-createPartida">
                             <div class="form-group">
                                <div class="form-control-wrap">
                                    <a href="/pos/" class="btn btn-danger">Voltar</a>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="form-control-wrap">
                                    <button value="Validate!" type="submit" href="{{ request.path }}" class="btn btn-success">Salvar</button>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
<!-- content @e -->
<!------------------------------------------------------------------------------------------------------------>
<script>

    let login = {% if form.login.errors %} true {% else %} false {% endif %};
    $(document).ready(function(){
        if($("#id_pos_online").is(':checked')){
            $("#id_mac_address").prop("disabled", true);
        }
        else{
            $("#id_mac_address").prop("disabled", false);
        }
    });
    $(function () {
        if (login) {
            let btn_create_vendedor = $(`#btn-create-vendedor`);
            btn_create_vendedor.css('display','none');

            let btn_remove_vendedor = $('#btn-remove-vendedor');
            btn_remove_vendedor.css('display','flex');

            let block = $('#content-vendedor');
            block.css('display','flex')

            let select = $('#id_vendedor')
            select.prop('disabled',true);
            select.val('');
        }
    })

    $('#id_pos_online').click(function(){
        if($("#id_pos_online").is(':checked')){
            $("#id_mac_address").prop("disabled", true);
        }
        else{
            $("#id_mac_address").prop("disabled", false);
        }
    })

    $('#btn-create-vendedor').click(function () {

        let btn_create_vendedor = $(`#btn-create-vendedor`);
        btn_create_vendedor.css('display','none');

        let btn_remove_vendedor = $('#btn-remove-vendedor');
        btn_remove_vendedor.css('display','flex');

        let block = $('#content-vendedor');
        block.css('display','flex')

        let select = $('#id_vendedor')
        select.prop('disabled',true);
        select.val('');
    })

    $('#btn-remove-vendedor').click(function () {
        let btn_create_vendedor = $('#btn-create-vendedor');
        btn_create_vendedor.css('display','flex');

        let btn_remove_vendedor = $('#btn-remove-vendedor');
        btn_remove_vendedor.css('display','none');

        let block = $('#content-vendedor');
        block.css('display','none')

        let select = $('#id_vendedor')
        select.prop('disabled',false);
        select.val('');
    })

    var valid_vendedor = {% if form.vendedor.errors %} false {% else %} true {% endif %}
    $(function() {
        if (valid_vendedor == false) {
            let value = $('#id_vendedor');
            value.addClass('is-invalid');
        }
    })

    let estabelecimentoInput = {% if estabelecimento %} true {% else %} false {% endif %}
    $(function () {
        let estabelecimento = $('#id_estabelecimento');
        let block_estabelecimento = $('#block-estabelecimento')

        if (estabelecimentoInput == true) {
            console.log('foi')
            estabelecimento.prop('hidden',true);
            block_estabelecimento.css('display','none')
        }
    })

</script>

{% endblock %}

